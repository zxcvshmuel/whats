const _0x25ae02 = _0x1922; (function (_0x2d2f48, _0x20ec5e) { const _0x1a6381 = _0x1922, _0x2a813a = _0x2d2f48(); while (!![]) { try { const _0x2a6ec0 = parseInt(_0x1a6381(0xef)) / 0x1 + -parseInt(_0x1a6381(0xe4)) / 0x2 + -parseInt(_0x1a6381(0xeb)) / 0x3 + -parseInt(_0x1a6381(0xe2)) / 0x4 * (parseInt(_0x1a6381(0xee)) / 0x5) + parseInt(_0x1a6381(0xf2)) / 0x6 * (parseInt(_0x1a6381(0xe3)) / 0x7) + parseInt(_0x1a6381(0xf4)) / 0x8 + -parseInt(_0x1a6381(0xdc)) / 0x9; if (_0x2a6ec0 === _0x20ec5e) break; else _0x2a813a['push'](_0x2a813a['shift']()); } catch (_0x59c637) { _0x2a813a['push'](_0x2a813a['shift']()); } } }(_0x187f, 0xb8059)); const router = require(_0x25ae02(0xea))[_0x25ae02(0xe6)](), awaitmysql = require(_0x25ae02(0xf6)), moment = require(_0x25ae02(0xf1)), { isuser, isvaliddownload } = require(_0x25ae02(0xed)); function _0x187f() { const _0x26f8d1 = ['Server\x20error', 'now', 'substring', 'mimetype', '482481VKzkUr', 'file', 'Media\x20was\x20deleted', '\x27)\x20', '\x27,\x27', 'body', '4HEgzEX', '9839137BGPYJk', '102942dKLdgY', 'name', 'Router', '/add', '/del', 'type', 'express', '2057952eXeOJV', 'json', '../middlewares/user', '4851335HVGfij', '364965LuChvj', 'files', 'moment', '6NzFDRS', 'Media\x20has\x20been\x20added', '5956224hjKwjj', 'exports', '../function/awaitmysql', 'uid', 'log', 'post', '/../client/public/user-media/', 'DELETE\x20FROM\x20media\x20WHERE\x20id\x20=\x27', 'query']; _0x187f = function () { return _0x26f8d1; }; return _0x187f(); } function _0x1922(_0x1ca164, _0x1e4cab) { const _0x187fe0 = _0x187f(); return _0x1922 = function (_0x192242, _0x1bbd7c) { _0x192242 = _0x192242 - 0xdc; let _0x44a5a0 = _0x187fe0[_0x192242]; return _0x44a5a0; }, _0x1922(_0x1ca164, _0x1e4cab); } router[_0x25ae02(0xf9)](_0x25ae02(0xe7), isuser, async (_0x496e62, _0x107b9a) => { const _0x4ac895 = _0x25ae02; try { if (_0x496e62[_0x4ac895(0xf0)]) { if (_0x496e62['files'][_0x4ac895(0xdd)] !== undefined) { const _0x650866 = _0x496e62['files'][_0x4ac895(0xdd)], _0x506c9c = ('' + Math['random']())[_0x4ac895(0xff)](0x2, 0x7) + Date[_0x4ac895(0xfe)]() + _0x650866[_0x4ac895(0xe5)]; _0x650866['mv'](__dirname + _0x4ac895(0xfa) + _0x506c9c, _0x39f125 => { if (_0x39f125) return console['log'](_0x39f125), _0x107b9a['json']({ 'err': _0x39f125 }); }), console['log'](_0x506c9c), await awaitmysql[_0x4ac895(0xfc)]('INSERT\x20INTO\x20media\x20(uid,\x20mimetype,\x20type,\x20name,\x20filename)\x20VALUES\x20(\x27' + _0x496e62['decode'][_0x4ac895(0xf7)] + _0x4ac895(0xe0) + _0x496e62[_0x4ac895(0xe1)][_0x4ac895(0x100)] + _0x4ac895(0xe0) + _0x496e62[_0x4ac895(0xe1)][_0x4ac895(0xe9)] + _0x4ac895(0xe0) + _0x496e62[_0x4ac895(0xe1)][_0x4ac895(0xe5)] + _0x4ac895(0xe0) + _0x506c9c + _0x4ac895(0xdf)), _0x107b9a[_0x4ac895(0xec)]({ 'msg': _0x4ac895(0xf3), 'success': !![], 'filename': _0x506c9c }); } } } catch (_0x202443) { _0x107b9a[_0x4ac895(0xec)]({ 'err': _0x202443, 'msg': _0x4ac895(0xfd) }), console[_0x4ac895(0xf8)](_0x202443); } }), router['get']('/get', isuser, async (_0x3645d8, _0x711597) => { const _0x453a36 = _0x25ae02; try { const _0x252616 = await awaitmysql[_0x453a36(0xfc)]('SELECT\x20*\x20FROM\x20media\x20WHERE\x20uid\x20=\x20\x27' + _0x3645d8['decode'][_0x453a36(0xf7)] + '\x27'); _0x711597[_0x453a36(0xec)]({ 'success': !![], 'data': _0x252616 }); } catch (_0xa7d93d) { _0x711597[_0x453a36(0xec)]({ 'err': _0xa7d93d, 'msg': _0x453a36(0xfd) }), console[_0x453a36(0xf8)](_0xa7d93d); } }), router['post'](_0x25ae02(0xe8), isuser, async (_0x284b2c, _0x35d6ca) => { const _0x327abf = _0x25ae02; try { const _0x3c3343 = await awaitmysql[_0x327abf(0xfc)](_0x327abf(0xfb) + _0x284b2c[_0x327abf(0xe1)]['id'] + '\x27'); _0x35d6ca[_0x327abf(0xec)]({ 'msg': _0x327abf(0xde), 'success': !![] }); } catch (_0x4a02ba) { _0x35d6ca[_0x327abf(0xec)]({ 'err': _0x4a02ba, 'msg': _0x327abf(0xfd) }), console['log'](_0x4a02ba); } }), module[_0x25ae02(0xf5)] = router;