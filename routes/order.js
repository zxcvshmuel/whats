const _0x5eba95 = _0x4fda; (function (_0x3c380b, _0x52da28) { const _0x2e7c92 = _0x4fda, _0x2ad359 = _0x3c380b(); while (!![]) { try { const _0x3059f2 = -parseInt(_0x2e7c92(0x1e1)) / 0x1 * (parseInt(_0x2e7c92(0x1dd)) / 0x2) + -parseInt(_0x2e7c92(0x1bb)) / 0x3 * (parseInt(_0x2e7c92(0x1dc)) / 0x4) + -parseInt(_0x2e7c92(0x1e8)) / 0x5 + parseInt(_0x2e7c92(0x1bd)) / 0x6 * (parseInt(_0x2e7c92(0x1c5)) / 0x7) + parseInt(_0x2e7c92(0x1d1)) / 0x8 * (parseInt(_0x2e7c92(0x1d0)) / 0x9) + -parseInt(_0x2e7c92(0x1cc)) / 0xa * (parseInt(_0x2e7c92(0x1f1)) / 0xb) + -parseInt(_0x2e7c92(0x1c8)) / 0xc * (-parseInt(_0x2e7c92(0x1e2)) / 0xd); if (_0x3059f2 === _0x52da28) break; else _0x2ad359['push'](_0x2ad359['shift']()); } catch (_0x1aacef) { _0x2ad359['push'](_0x2ad359['shift']()); } } }(_0x5dff, 0x6d94c)); function _0x4fda(_0x5d6608, _0x20e953) { const _0x5dff87 = _0x5dff(); return _0x4fda = function (_0x4fda47, _0xe027c9) { _0x4fda47 = _0x4fda47 - 0x1b9; let _0x245856 = _0x5dff87[_0x4fda47]; return _0x245856; }, _0x4fda(_0x5d6608, _0x20e953); } const router = require(_0x5eba95(0x1bc))['Router'](), con = require(_0x5eba95(0x1e3)), bcrypt = require(_0x5eba95(0x1f0)), { isvalid, isuser } = require(_0x5eba95(0x1ed)), moment = require('moment'), fetch = require(_0x5eba95(0x1c0)), orderfun = require(_0x5eba95(0x1f9)), Razorpay = require(_0x5eba95(0x1de)), randomstring = require(_0x5eba95(0x1f4)), awaitmysql = require('../function/awaitmysql'); function _0x5dff() { const _0x53d7c9 = ['GET', 'status', '../middlewares/user', 'add', 'grant_type=client_credentials', 'bcrypt', '286qBiXAx', 'https://api-m.sandbox.paypal.com/v1/oauth2/token', 'ordergen', 'randomstring', 'from', 'rz_payment_id', 'INR', 'Paypal', './order/orderfun', 'query', 'SELECT\x20*\x20FROM\x20plan\x20WHERE\x20id\x20=\x20\x27', 'access_token', 'Basic\x20', 'rz_key', 'paypal_client_secret', 'updatemsg', 'Something\x20went\x20wrong\x20with\x20yout\x20payment.\x20Please\x20try\x20again\x20or\x20contact\x20support\x20if\x20your\x20payment\x20deducted', '105zLRBsL', 'express', '18cyFEmW', 'round', 'order_id', 'node-fetch', 'Db\x20query\x20error', 'exports', 'time_period', 'payments', '1302035Nkzrmx', 'base64', 'Order\x20id\x20and\x20plan\x20required', '12omcHKT', 'plan', 'https://api-m.sandbox.paypal.com/v1/checkout/orders/', 'log', '310140rjQyxY', 'post', 'amount', 'capture', '2817VkcqOY', '7376ZyMgXn', 'getweb', 'body', 'POST', '/get_all_orders_admin', 'binary', '/paypal_with_paypal', 'Congo!', 'COMPLETED', 'Server\x20error', 'exchange_rate', '3268KhkAMZ', '14NwTeNS', 'razorpay', 'length', 'json', '17974HDsUlU', '17338945FimKST', '../config/config', 'days', '/free_plan', 'Invalid\x20plan', 'toString', '3853725Auixpr', 'get', 'Something\x20went\x20wrong,\x20Try\x20again']; _0x5dff = function () { return _0x53d7c9; }; return _0x5dff(); } router['post']('/pay_with_rz', isuser, async (_0x54c251, _0x3fc0fc) => { const _0x4f65dd = _0x5eba95; try { const _0xbeb0ca = _0x54c251[_0x4f65dd(0x1d3)][_0x4f65dd(0x1c9)], _0x1aee31 = await orderfun[_0x4f65dd(0x1d2)](), _0x127d73 = new Date(), _0x2ef380 = moment(_0x127d73)[_0x4f65dd(0x1ee)](_0xbeb0ca[_0x4f65dd(0x1c3)], _0x4f65dd(0x1e4)); var _0x18b5ca = new Razorpay({ 'key_id': _0x1aee31['rz_id'], 'key_secret': _0x1aee31[_0x4f65dd(0x1fe)] }); const _0x2b21bc = parseInt(_0x54c251[_0x4f65dd(0x1d3)][_0x4f65dd(0x1ce)]) / parseInt(_0x1aee31[_0x4f65dd(0x1db)]) * 0x50, _0x5cc387 = await _0x18b5ca[_0x4f65dd(0x1c4)][_0x4f65dd(0x1cf)](_0x54c251[_0x4f65dd(0x1d3)][_0x4f65dd(0x1f6)], Math[_0x4f65dd(0x1be)](_0x2b21bc) * 0x64, _0x4f65dd(0x1f7)); if (!_0x5cc387) { _0x3fc0fc[_0x4f65dd(0x1e0)]({ 'success': ![], 'msg': _0x4f65dd(0x1ea) }); return; } const _0xa7a848 = await orderfun[_0x4f65dd(0x1b9)]({ 'req': _0x54c251, 'plan': _0xbeb0ca }); await orderfun[_0x4f65dd(0x1f3)]({ 'req': _0x54c251, 'msgg': _0x5cc387, 'type': 'Razorpay' }), _0x3fc0fc[_0x4f65dd(0x1e0)]({ 'success': !![], 'data': _0xa7a848, 'msg': 'Congo!' }); } catch (_0x50b100) { console[_0x4f65dd(0x1cb)](_0x50b100), _0x3fc0fc[_0x4f65dd(0x1e0)]({ 'msg': _0x4f65dd(0x1da), 'err': _0x50b100 }); } }), router['post'](_0x5eba95(0x1e5), isuser, async (_0x29afd2, _0x5b8b8f) => { const _0x1f936f = _0x5eba95; try { const _0x39ee9e = await awaitmysql[_0x1f936f(0x1fa)](_0x1f936f(0x1fb) + _0x29afd2[_0x1f936f(0x1d3)][_0x1f936f(0x1c9)]['id'] + '\x27\x20'); if (_0x39ee9e[_0x1f936f(0x1df)] < 0x1) return _0x5b8b8f['json']({ 'msg': _0x1f936f(0x1e6) }); var _0x44df49 = _0x39ee9e[0x0]; const _0x18de14 = await orderfun['updatemsg']({ 'req': _0x29afd2, 'plan': _0x44df49 }); _0x5b8b8f[_0x1f936f(0x1e0)]({ 'success': !![], 'data': _0x18de14, 'msg': _0x1f936f(0x1d8) }); } catch (_0x44386e) { console['log'](_0x44386e), _0x5b8b8f[_0x1f936f(0x1e0)]({ 'msg': _0x1f936f(0x1da), 'err': _0x44386e }); } }), router[_0x5eba95(0x1cd)](_0x5eba95(0x1d7), isuser, async (_0x4a9a0b, _0x11eb45) => { const _0x65ef9e = _0x5eba95; try { var _0x5696da = _0x4a9a0b['body'][_0x65ef9e(0x1bf)]; const _0x4310bc = _0x4a9a0b[_0x65ef9e(0x1d3)][_0x65ef9e(0x1c9)]; if (!_0x5696da || !_0x4310bc) return _0x11eb45['json']({ 'msg': _0x65ef9e(0x1c7) }); const _0x4b688b = new Date(), _0x5e5a5a = moment(_0x4b688b)['add'](_0x4310bc['time_period'], _0x65ef9e(0x1e4)), _0xcc994a = await orderfun[_0x65ef9e(0x1d2)](); let _0xb11cec = _0xcc994a['paypal_client_id'], _0x377041 = _0xcc994a[_0x65ef9e(0x1ff)], _0x25b942 = await fetch(_0x65ef9e(0x1f2), { 'method': _0x65ef9e(0x1d4), 'body': _0x65ef9e(0x1ef), 'headers': { 'Authorization': _0x65ef9e(0x1fd) + Buffer[_0x65ef9e(0x1f5)](_0xb11cec + ':' + _0x377041, _0x65ef9e(0x1d6))[_0x65ef9e(0x1e7)](_0x65ef9e(0x1c6)) } }), _0x5b264f = await _0x25b942[_0x65ef9e(0x1e0)](), _0x4a22da = await fetch(_0x65ef9e(0x1ca) + _0x5696da, { 'method': _0x65ef9e(0x1eb), 'headers': { 'Authorization': 'Bearer\x20' + _0x5b264f[_0x65ef9e(0x1fc)] } }), _0x29e679 = await _0x4a22da[_0x65ef9e(0x1e0)](); if (!_0x29e679[_0x65ef9e(0x1ec)] === _0x65ef9e(0x1d9)) { _0x11eb45[_0x65ef9e(0x1e0)]({ 'success': ![], 'msg': _0x65ef9e(0x1ba) }); return; } const _0x1874fc = await orderfun[_0x65ef9e(0x1b9)]({ 'req': _0x4a9a0b, 'plan': _0x4310bc }); var _0x211355 = _0x29e679; await orderfun['ordergen']({ 'req': _0x4a9a0b, 'msgg': _0x211355, 'type': _0x65ef9e(0x1f8) }), _0x11eb45[_0x65ef9e(0x1e0)]({ 'success': !![], 'data': _0x1874fc, 'msg': _0x65ef9e(0x1d8) }); } catch (_0x3dd13e) { console['log'](_0x3dd13e), _0x11eb45['json']({ 'err': _0x3dd13e, 'msg': _0x65ef9e(0x1da) }); } }), router[_0x5eba95(0x1e9)](_0x5eba95(0x1d5), isvalid, (_0x26c8fa, _0x30a943) => { const _0x3db42b = _0x5eba95; var _0x1a73d5 = 'SELECT\x20*\x20FROM\x20orders'; con[_0x3db42b(0x1fa)](_0x1a73d5, (_0x4915cb, _0xc89bb1) => { const _0x396b1d = _0x3db42b; if (_0x4915cb) { _0x30a943['json']({ 'msg': _0x396b1d(0x1c1) }), console[_0x396b1d(0x1cb)](_0x4915cb); return; } else _0x30a943[_0x396b1d(0x1e0)]({ 'success': !![], 'data': _0xc89bb1 }); }); }), module[_0x5eba95(0x1c2)] = router;