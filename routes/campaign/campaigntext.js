const _0x1ddb74 = _0x386f; (function (_0x48ea9f, _0x26dd41) { const _0x2a86f3 = _0x386f, _0x16713a = _0x48ea9f(); while (!![]) { try { const _0x4d49d2 = parseInt(_0x2a86f3(0x190)) / 0x1 * (-parseInt(_0x2a86f3(0x15a)) / 0x2) + -parseInt(_0x2a86f3(0x157)) / 0x3 * (-parseInt(_0x2a86f3(0x172)) / 0x4) + -parseInt(_0x2a86f3(0x160)) / 0x5 + -parseInt(_0x2a86f3(0x14b)) / 0x6 + -parseInt(_0x2a86f3(0x196)) / 0x7 + -parseInt(_0x2a86f3(0x173)) / 0x8 + -parseInt(_0x2a86f3(0x162)) / 0x9 * (-parseInt(_0x2a86f3(0x14d)) / 0xa); if (_0x4d49d2 === _0x26dd41) break; else _0x16713a['push'](_0x16713a['shift']()); } catch (_0x2f8190) { _0x16713a['push'](_0x16713a['shift']()); } } }(_0x1815, 0xaa8c9)); const { default: makeWASocket, DisconnectReason, useSingleFileAuthState } = require(_0x1ddb74(0x15b)), awaitmysql = require('../../function/awaitmysql'), pino = require(_0x1ddb74(0x17d)); var mime = require(_0x1ddb74(0x15f)); const fs = require('fs'); async function run(_0x1e5ce1, _0x246a33) { const _0x5970bc = _0x1ddb74, _0x4eca86 = _0x1e5ce1[_0x5970bc(0x14f)]?.[_0x5970bc(0x17e)]?.[_0x5970bc(0x16c)], _0x58fe09 = _0x1e5ce1[_0x5970bc(0x14f)]?.[_0x5970bc(0x17e)]?.['message'], _0x39dcaa = _0x1e5ce1['body']?.['templet_paste']?.[_0x5970bc(0x167)] === _0x5970bc(0x176) ? ![] : _0x1e5ce1[_0x5970bc(0x14f)]?.[_0x5970bc(0x17e)]?.['media'], _0x14d432 = _0x1e5ce1['body']?.[_0x5970bc(0x17e)]?.['id'], _0x850c36 = _0x1e5ce1[_0x5970bc(0x14f)]?.[_0x5970bc(0x182)]?.[_0x5970bc(0x168)], _0x55833b = _0x1e5ce1['body'][_0x5970bc(0x188)] || 0x2, _0x3d5d14 = _0x1e5ce1[_0x5970bc(0x14f)][_0x5970bc(0x16a)]; if (!_0x58fe09 || !_0x850c36 || !_0x14d432 || !_0x4eca86 || !_0x55833b) return _0x246a33[_0x5970bc(0x169)]({ 'msg': _0x5970bc(0x193) }); if (_0x4eca86[_0x5970bc(0x197)](',')?.['length'] > _0x1e5ce1[_0x5970bc(0x158)]) return _0x246a33[_0x5970bc(0x169)]({ 'msg': _0x5970bc(0x159) + _0x1e5ce1[_0x5970bc(0x158)] + _0x5970bc(0x181) }); const _0x598730 = __dirname + _0x5970bc(0x163); console['log'](_0x5970bc(0x186)); const _0x57e666 = _0x598730 + _0x850c36 + _0x5970bc(0x170); console['log'](_0x57e666); if (_0x57e666 === undefined || !_0x57e666) return _0x246a33[_0x5970bc(0x169)]({ 'msg': _0x5970bc(0x154) }); _0x246a33[_0x5970bc(0x169)]({ 'msg': 'Request\x20has\x20been\x20sent\x20check\x20status\x20in\x20campaign\x20history.', 'success': !![] }), await awaitmysql[_0x5970bc(0x16f)](_0x5970bc(0x153) + _0x3d5d14 + _0x5970bc(0x171) + _0x1e5ce1[_0x5970bc(0x166)]['uid'] + _0x5970bc(0x171) + _0x14d432 + _0x5970bc(0x18e)); const { state: _0x18991f, saveState: _0x95dd89 } = useSingleFileAuthState(_0x598730[_0x5970bc(0x161)](_0x850c36 + _0x5970bc(0x170))), _0x2b5a49 = makeWASocket({ 'auth': _0x18991f, 'defaultQueryTimeoutMs': undefined, 'logger': pino({ 'level': 'fatal' }), 'browser': [_0x5970bc(0x155), _0x5970bc(0x18f), _0x5970bc(0x17c)] }); let _0x316828 = 0x0; var _0x31f6b4 = _0x55833b[0x0], _0x4f658e = _0x55833b[0x1]; let _0x2d7ff0 = []; function _0x52e4e5(_0x3a9660) { return new Promise((_0x2e7f3d, _0x1b3397) => { setTimeout(() => { _0x2e7f3d(); }, [_0x3a9660]); }); } function _0x44fa0c(_0x16b947, _0x33b6d4) { const _0x43a190 = _0x5970bc; return Math[_0x43a190(0x149)](Math['random']() * (_0x33b6d4 - _0x16b947 + 0x1) + _0x16b947); } _0x2b5a49['ev']['on'](_0x5970bc(0x18d), async _0xf95846 => { const _0x24832c = _0x5970bc, { connection: _0x495cda, lastDisconnect: _0x22cef0, qr: _0x232f80, isNewLogin: _0x5c8112 } = _0xf95846; console['log'](_0x495cda); if (_0x495cda === _0x24832c(0x16b)) { let _0x25c9c4 = _0x22cef0[_0x24832c(0x184)]?.['output']?.[_0x24832c(0x150)]; console[_0x24832c(0x183)]({ 'statusCode': _0x25c9c4 }); if (_0x25c9c4 === DisconnectReason[_0x24832c(0x151)] || _0x25c9c4 === DisconnectReason[_0x24832c(0x165)] || _0x25c9c4 === DisconnectReason['loggedOut'] || _0x25c9c4 === DisconnectReason[_0x24832c(0x16d)]) { await awaitmysql[_0x24832c(0x16f)](_0x24832c(0x18a) + _0x3d5d14 + '\x27\x20'), await awaitmysql[_0x24832c(0x16f)](_0x24832c(0x199) + _0x850c36 + '\x27\x20'); var _0x2f9a06 = __dirname + _0x24832c(0x163) + _0x850c36 + '.json'; _0x2f9a06 && fs[_0x24832c(0x175)](_0x2f9a06); _0x2b5a49[_0x24832c(0x16e)](); return; } } async function _0x3ab8fd() { const _0x818f93 = _0x24832c, _0x366830 = await _0x18a7bc(_0x4eca86[_0x818f93(0x197)](',')[_0x316828], _0x58fe09, _0x39dcaa, _0x2b5a49); _0x366830['sent_number'] && _0x2d7ff0[_0x818f93(0x17b)](_0x366830[_0x818f93(0x180)]); _0x316828 += 0x1; const _0x2e7b9a = parseInt(_0x44fa0c(_0x31f6b4, _0x4f658e)) * 0x3e8; await _0x52e4e5(_0x2e7b9a); if (_0x316828 < _0x4eca86[_0x818f93(0x197)](',')['length']) { _0x3ab8fd(); return; } console[_0x818f93(0x183)](_0x818f93(0x156)), await awaitmysql[_0x818f93(0x16f)]('UPDATE\x20campaign\x20SET\x20status\x20=\x20\x27completed\x27\x20WHERE\x20unique_id\x20=\x20\x27' + _0x3d5d14 + '\x27\x20'), _0x2b5a49[_0x818f93(0x16e)](); } _0x495cda === _0x24832c(0x164) && _0x3ab8fd(); }), _0x2b5a49['ev']['on'](_0x5970bc(0x17a), _0x95dd89), console[_0x5970bc(0x183)](_0x5970bc(0x14a)); function _0x18a7bc(_0x269388, _0x49dbbd, _0x3d6d33, _0xd62199) { return new Promise(async (_0x3590d0, _0x57dc9c) => { const _0x11b5e1 = _0x386f, _0x38ada4 = await _0xd62199[_0x11b5e1(0x185)](_0x269388), _0x21570d = _0x269388; console[_0x11b5e1(0x183)]({ 'onwhatsapp': _0x38ada4 }); if (_0x38ada4[0x0]?.[_0x11b5e1(0x198)]) { if (_0x3d6d33) { const _0x520a26 = mime[_0x11b5e1(0x179)](__dirname + _0x11b5e1(0x187) + _0x3d6d33), _0x253c63 = _0x520a26[_0x11b5e1(0x189)](0x0, _0x520a26['indexOf']('/')); if (_0x253c63 == 'image') { console[_0x11b5e1(0x183)]('found\x20media\x20msg'); var _0x541510 = { 'image': { 'url': __dirname + _0x11b5e1(0x187) + _0x3d6d33 }, 'caption': _0x49dbbd ? _0x49dbbd : null }; } else { if (_0x253c63 == _0x11b5e1(0x18b)) var _0x541510 = { 'video': { 'url': __dirname + _0x11b5e1(0x187) + _0x3d6d33 }, 'caption': _0x49dbbd ? _0x49dbbd : null }; else { if (_0x253c63 == 'audio') var _0x541510 = { 'audio': { 'url': __dirname + '/../../client/public/user-media/' + _0x3d6d33 }, 'caption': _0x49dbbd ? _0x49dbbd : null }; else var _0x541510 = { 'document': { 'url': __dirname + _0x11b5e1(0x187) + _0x3d6d33 }, 'mimetype': _0x520a26 }; } } const _0x14e6c3 = await _0xd62199[_0x11b5e1(0x152)](_0x38ada4[0x0]?.[_0x11b5e1(0x195)], _0x541510); console[_0x11b5e1(0x183)]({ 'status': _0x11b5e1(0x194), 'number': _0x269388, 'message': _0x49dbbd }); } else await _0xd62199[_0x11b5e1(0x152)](_0x38ada4[0x0]?.[_0x11b5e1(0x195)], { 'text': _0x49dbbd }), console[_0x11b5e1(0x183)]({ 'status': _0x11b5e1(0x18c), 'number': _0x269388, 'message': _0x49dbbd }); const _0x2d4c9a = await awaitmysql[_0x11b5e1(0x16f)](_0x11b5e1(0x15d) + _0x1e5ce1[_0x11b5e1(0x166)][_0x11b5e1(0x191)] + '\x27\x20'); if (_0x2d4c9a[_0x11b5e1(0x174)] > 0x0 || _0x2d4c9a[0x0][_0x11b5e1(0x14e)]) { var _0x27521d = parseInt(_0x2d4c9a[0x0]['left_msg']) - 0x1; await awaitmysql[_0x11b5e1(0x16f)](_0x11b5e1(0x192) + _0x27521d + '\x27)\x20'); } const _0x359f9e = await awaitmysql[_0x11b5e1(0x16f)](_0x11b5e1(0x14c) + _0x3d5d14 + '\x27\x20'); var _0x541510 = []; _0x359f9e[0x0]?.['sent'] ? (_0x541510 = JSON['parse'](_0x359f9e[0x0]?.['sent']), _0x541510 = _0x541510[_0x11b5e1(0x161)](_0x269388), _0x541510 = JSON[_0x11b5e1(0x177)](_0x541510)) : _0x541510 = JSON['stringify']([_0x269388]); await awaitmysql[_0x11b5e1(0x16f)](_0x11b5e1(0x17f) + _0x541510 + _0x11b5e1(0x178) + _0x3d5d14 + '\x27\x20'), _0x3590d0({ 'sent_number': _0x269388 }); return; } else console[_0x11b5e1(0x183)](_0x269388, _0x11b5e1(0x15c)), _0x3590d0({ 'sent_number': ![] }); }); } } function _0x1815() { const _0x170f98 = ['creds.update', 'push', '1.0', 'pino', 'templet_paste', 'UPDATE\x20campaign\x20SET\x20sent\x20=\x20\x27', 'sent_number', '\x20left\x20messages\x20and\x20you\x20are\x20trying\x20to\x20send\x20more\x20than\x20it.', 'instance', 'log', 'error', 'onWhatsApp', 'started', '/../../client/public/user-media/', 'delay', 'slice', 'UPDATE\x20campaign\x20SET\x20status\x20=\x20\x27failed\x20due\x20to\x20logout\x27\x20WHERE\x20unique_id\x20=\x20\x27', 'video', 'sent\x20but\x20no\x20media', 'connection.update', '\x27,\x20\x27started\x27,\x20\x27paste\x27)\x20', 'EDGE', '8EDiQZS', 'uid', 'UPDATE\x20user\x20SET\x20left_msg\x20=\x20(\x27', 'Send\x20all\x20required\x20fields\x20', 'sent', 'jid', '7805707rshsjx', 'split', 'exists', 'DELETE\x20FROM\x20instance\x20WHERE\x20client_id\x20=\x20\x27', 'floor', 'cre\x20updated', '5385186tpQXvh', 'SELECT\x20*\x20FROM\x20campaign\x20WHERE\x20unique_id\x20=\x20\x27', '189610ShwRVe', 'left_msg', 'body', 'statusCode', 'connectionClosed', 'sendMessage', 'INSERT\x20INTO\x20campaign\x20(unique_id,\x20uid,\x20templet_id,\x20status,\x20type)\x20VALUES\x20\x20(\x27', 'No\x20session\x20found\x20please\x20relogin\x20the\x20instance.', 'FFA', 'task\x20done', '2474472yCJKDd', 'plan', 'You\x20have\x20only\x20', '106776XtIUAI', '@adiwajshing/baileys', '\x20Mobile\x20number\x20is\x20not\x20registered', 'SELECT\x20*\x20FROM\x20user\x20WHERE\x20uid\x20=\x20\x27', 'run', 'mime-types', '3900215dXaBRQ', 'concat', '1575WqGpwf', '/../../sessions/', 'open', 'connectionLost', 'decode', 'media', 'client_id', 'json', 'unique_id', 'close', 'pastedString', 'badSession', 'end', 'query', '.json', '\x27,\x27', '4fRoWko', '1797208oIqtRY', 'length', 'unlinkSync', 'null', 'stringify', '\x27\x20WHERE\x20unique_id\x20=\x20\x27', 'lookup']; _0x1815 = function () { return _0x170f98; }; return _0x1815(); } function _0x386f(_0xc9b90c, _0x8cb061) { const _0x1815eb = _0x1815(); return _0x386f = function (_0x386f82, _0x1784ba) { _0x386f82 = _0x386f82 - 0x149; let _0x59c6b4 = _0x1815eb[_0x386f82]; return _0x59c6b4; }, _0x386f(_0xc9b90c, _0x8cb061); } exports[_0x1ddb74(0x15e)] = run;