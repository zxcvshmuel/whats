const _0x5b7f5d = _0xc6ce; (function (_0x179a9b, _0x2edb42) { const _0x20cf72 = _0xc6ce, _0x3a5bdb = _0x179a9b(); while (!![]) { try { const _0x510acf = parseInt(_0x20cf72(0x17a)) / 0x1 + parseInt(_0x20cf72(0x156)) / 0x2 * (-parseInt(_0x20cf72(0x152)) / 0x3) + parseInt(_0x20cf72(0x179)) / 0x4 * (parseInt(_0x20cf72(0x193)) / 0x5) + -parseInt(_0x20cf72(0x165)) / 0x6 * (parseInt(_0x20cf72(0x162)) / 0x7) + -parseInt(_0x20cf72(0x16e)) / 0x8 + parseInt(_0x20cf72(0x17f)) / 0x9 * (parseInt(_0x20cf72(0x15f)) / 0xa) + parseInt(_0x20cf72(0x15e)) / 0xb; if (_0x510acf === _0x2edb42) break; else _0x3a5bdb['push'](_0x3a5bdb['shift']()); } catch (_0x3bdfc5) { _0x3a5bdb['push'](_0x3a5bdb['shift']()); } } }(_0x2977, 0x64f16)); const { default: makeWASocket, DisconnectReason, useSingleFileAuthState } = require(_0x5b7f5d(0x198)), awaitmysql = require(_0x5b7f5d(0x1a0)), pino = require(_0x5b7f5d(0x18e)); function _0xc6ce(_0x49174e, _0x3c8141) { const _0x297722 = _0x2977(); return _0xc6ce = function (_0xc6ceaf, _0x151f84) { _0xc6ceaf = _0xc6ceaf - 0x152; let _0x30e519 = _0x297722[_0xc6ceaf]; return _0x30e519; }, _0xc6ce(_0x49174e, _0x3c8141); } function _0x2977() { const _0x2d7cde = ['video', 'log', 'random', 'var_six', 'lookup', 'run', '63vXeCaP', 'decode', 'media', 'UPDATE\x20user\x20SET\x20left_msg\x20=\x20(\x27', '69436HzkNAq', 'task\x20done', 'onWhatsApp', '.json', 'var_ten', 'connection.update', '\x20Mobile\x20number\x20is\x20not\x20registered', 'push', '13226796ZPsjaK', '3172480oodHek', 'var_one', 'No\x20session\x20found\x20please\x20relogin\x20the\x20instance.', '70595XIpswc', 'exists', 'open', '78uqnyWp', 'var_nine', '/../../sessions/', 'floor', 'uid', '\x27,\x20\x27started\x27,\x20\x27list\x27)\x20', 'FFA', 'templet_excel', '\x20left\x20messages\x20and\x20you\x20are\x20trying\x20to\x20send\x20more\x20than\x20it.', '5904048gzbLcy', '\x27,\x27', 'Request\x20has\x20been\x20sent\x20check\x20status\x20in\x20campaign\x20history.', 'connectionLost', 'EDGE', 'message', 'length', 'var_five', 'image', 'UPDATE\x20campaign\x20SET\x20status\x20=\x20\x27failed\x20due\x20to\x20logout\x27\x20WHERE\x20unique_id\x20=\x20\x27', 'var_fifteen', '16292SKJXWC', '170646UPDpBm', 'var_eleven', 'jid', 'var_seven', 'var_four', '18GMaIrJ', 'client_id', 'found\x20media\x20msg', 'DELETE\x20FROM\x20instance\x20WHERE\x20client_id\x20=\x20\x27', 'left_msg', 'excelJson', 'connectionClosed', 'sendMessage', 'var_thirteen', 'unique_id', 'indexOf', 'var_eight', 'started', 'instance', 'loggedOut', 'pino', 'concat', 'body', 'replace', 'stringify', '5ITauYd', 'numbers', 'var_twelve', 'end', 'var_fourteen', '@adiwajshing/baileys', 'error', 'parse', '\x27\x20WHERE\x20unique_id\x20=\x20\x27', 'json', 'badSession', 'plan', 'creds.update', '../../function/awaitmysql', 'SELECT\x20*\x20FROM\x20user\x20WHERE\x20uid\x20=\x20\x27', 'SELECT\x20*\x20FROM\x20campaign\x20WHERE\x20unique_id\x20=\x20\x27', 'var_two', 'delay', 'sent', 'unlinkSync', 'sent\x20but\x20no\x20media', 'query', '/../../client/public/user-media/', 'fatal']; _0x2977 = function () { return _0x2d7cde; }; return _0x2977(); } var mime = require('mime-types'); const fs = require('fs'); async function run(_0x434676, _0x3409d5) { const _0xcc963e = _0x5b7f5d, _0x4aa0cc = _0x434676[_0xcc963e(0x190)][_0xcc963e(0x173)], _0x444b3c = _0x434676[_0xcc963e(0x190)][_0xcc963e(0x1a4)][0x0], _0x258637 = _0x434676['body']['delay'][0x1], _0x4507c2 = _0x434676[_0xcc963e(0x190)]?.[_0xcc963e(0x18c)]?.[_0xcc963e(0x180)], _0x65adb4 = _0x434676[_0xcc963e(0x190)]?.[_0xcc963e(0x16c)]?.[_0xcc963e(0x154)] === 'null' ? ![] : _0x434676[_0xcc963e(0x190)]?.['templet_excel']?.['media'], _0x153839 = _0x434676[_0xcc963e(0x190)]?.['templet_excel']?.['id'], _0x5c4613 = JSON[_0xcc963e(0x19a)](_0x434676[_0xcc963e(0x190)]?.['templet_excel']?.[_0xcc963e(0x184)]), _0x27b01c = _0x434676[_0xcc963e(0x190)][_0xcc963e(0x188)]; if (!_0x4aa0cc || !_0x444b3c || !_0x258637 || !_0x4507c2 || !_0x153839 || !_0x5c4613 || !_0x27b01c) return _0x3409d5[_0xcc963e(0x19c)]({ 'msg': 'Send\x20all\x20required\x20fields\x20' }); if (_0x5c4613?.[_0xcc963e(0x174)] > _0x434676[_0xcc963e(0x19e)]) return _0x3409d5[_0xcc963e(0x19c)]({ 'msg': 'You\x20have\x20only\x20' + _0x434676[_0xcc963e(0x19e)] + _0xcc963e(0x16d) }); const _0x186252 = __dirname + _0xcc963e(0x167); console[_0xcc963e(0x1ac)](_0xcc963e(0x18b)); const _0x321ed5 = _0x186252 + _0x4507c2 + _0xcc963e(0x159); console[_0xcc963e(0x1ac)](_0x321ed5); if (_0x321ed5 === undefined || !_0x321ed5) return _0x3409d5[_0xcc963e(0x19c)]({ 'msg': _0xcc963e(0x161) }); _0x3409d5[_0xcc963e(0x19c)]({ 'msg': _0xcc963e(0x170), 'success': !![] }), await awaitmysql[_0xcc963e(0x1a8)]('INSERT\x20INTO\x20campaign\x20(unique_id,\x20uid,\x20templet_id,\x20status,\x20type)\x20VALUES\x20\x20(\x27' + _0x27b01c + _0xcc963e(0x16f) + _0x434676['decode'][_0xcc963e(0x169)] + _0xcc963e(0x16f) + _0x153839 + _0xcc963e(0x16a)); const { state: _0x324f10, saveState: _0x3ca1f0 } = useSingleFileAuthState(_0x186252[_0xcc963e(0x18f)](_0x4507c2 + '.json')), _0x4ce83e = makeWASocket({ 'auth': _0x324f10, 'defaultQueryTimeoutMs': undefined, 'logger': pino({ 'level': _0xcc963e(0x1aa) }), 'browser': [_0xcc963e(0x16b), _0xcc963e(0x172), '1.0'] }); let _0x599720 = 0x0, _0x510db0 = []; function _0x48b9df(_0x33e623) { return new Promise((_0x793a9b, _0x258b5a) => { setTimeout(() => { _0x793a9b(); }, [_0x33e623]); }); } function _0x3488cb(_0x318d95, _0x2bab60) { const _0x214b60 = _0xcc963e; return Math[_0x214b60(0x168)](Math[_0x214b60(0x1ad)]() * (_0x2bab60 - _0x318d95 + 0x1) + _0x318d95); } _0x4ce83e['ev']['on'](_0xcc963e(0x15b), async _0x46a48e => { const _0x316dcb = _0xcc963e, { connection: _0x3bbf04, lastDisconnect: _0x3f56a1, qr: _0x2423fd, isNewLogin: _0x4c731f } = _0x46a48e; console[_0x316dcb(0x1ac)](_0x3bbf04); if (_0x3bbf04 === 'close') { let _0x1c86e5 = _0x3f56a1[_0x316dcb(0x199)]?.['output']?.['statusCode']; console[_0x316dcb(0x1ac)]({ 'statusCode': _0x1c86e5 }); if (_0x1c86e5 === DisconnectReason[_0x316dcb(0x185)] || _0x1c86e5 === DisconnectReason[_0x316dcb(0x171)] || _0x1c86e5 === DisconnectReason[_0x316dcb(0x18d)] || _0x1c86e5 === DisconnectReason[_0x316dcb(0x19d)]) { await awaitmysql[_0x316dcb(0x1a8)](_0x316dcb(0x177) + _0x27b01c + '\x27\x20'), await awaitmysql[_0x316dcb(0x1a8)](_0x316dcb(0x182) + _0x4507c2 + '\x27\x20'); var _0x62c158 = __dirname + _0x316dcb(0x167) + _0x4507c2 + _0x316dcb(0x159); _0x62c158 && fs[_0x316dcb(0x1a6)](_0x62c158); _0x4ce83e[_0x316dcb(0x196)](); return; } } async function _0x3a7045() { const _0x24a5ad = _0x316dcb, _0x52226e = await _0xc427ea(_0x5c4613[_0x599720][_0x24a5ad(0x194)], _0x4aa0cc[_0x24a5ad(0x191)](_0x24a5ad(0x160), _0x5c4613[_0x599720][_0x24a5ad(0x160)])[_0x24a5ad(0x191)](_0x24a5ad(0x1a3), _0x5c4613[_0x599720][_0x24a5ad(0x1a3)])[_0x24a5ad(0x191)]('var_three', _0x5c4613[_0x599720]['var_three'])[_0x24a5ad(0x191)](_0x24a5ad(0x17e), _0x5c4613[_0x599720][_0x24a5ad(0x17e)])['replace'](_0x24a5ad(0x175), _0x5c4613[_0x599720][_0x24a5ad(0x175)])[_0x24a5ad(0x191)](_0x24a5ad(0x1ae), _0x5c4613[_0x599720][_0x24a5ad(0x1ae)])[_0x24a5ad(0x191)](_0x24a5ad(0x17d), _0x5c4613[_0x599720][_0x24a5ad(0x17d)])['replace']('var_eight', _0x5c4613[_0x599720][_0x24a5ad(0x18a)])['replace'](_0x24a5ad(0x166), _0x5c4613[_0x599720][_0x24a5ad(0x166)])[_0x24a5ad(0x191)](_0x24a5ad(0x15a), _0x5c4613[_0x599720][_0x24a5ad(0x15a)])[_0x24a5ad(0x191)](_0x24a5ad(0x17b), _0x5c4613[_0x599720][_0x24a5ad(0x17b)])[_0x24a5ad(0x191)](_0x24a5ad(0x195), _0x5c4613[_0x599720][_0x24a5ad(0x195)])[_0x24a5ad(0x191)](_0x24a5ad(0x187), _0x5c4613[_0x599720][_0x24a5ad(0x187)])[_0x24a5ad(0x191)](_0x24a5ad(0x197), _0x5c4613[_0x599720][_0x24a5ad(0x197)])[_0x24a5ad(0x191)](_0x24a5ad(0x178), _0x5c4613[_0x599720][_0x24a5ad(0x178)]), _0x65adb4, _0x4ce83e); _0x52226e['sent_number'] && _0x510db0[_0x24a5ad(0x15d)](_0x52226e['sent_number']); _0x599720 += 0x1; const _0xb2c5b6 = parseInt(_0x3488cb(_0x444b3c, _0x258637)) * 0x3e8; await _0x48b9df(_0xb2c5b6), console[_0x24a5ad(0x1ac)]({ 'i': _0x599720, 'length': _0x5c4613[_0x24a5ad(0x174)] }); if (_0x599720 < _0x5c4613['length']) { _0x3a7045(); return; } console[_0x24a5ad(0x1ac)](_0x24a5ad(0x157)), await awaitmysql[_0x24a5ad(0x1a8)]('UPDATE\x20campaign\x20SET\x20status\x20=\x20\x27completed\x27\x20WHERE\x20unique_id\x20=\x20\x27' + _0x27b01c + '\x27\x20'); } _0x3bbf04 === _0x316dcb(0x164) && _0x3a7045(); }), _0x4ce83e['ev']['on'](_0xcc963e(0x19f), _0x3ca1f0), console[_0xcc963e(0x1ac)]('cre\x20updated'); function _0xc427ea(_0x746d5f, _0x31881b, _0x5cf72, _0x59ce31) { return new Promise(async (_0x14228e, _0x1da75c) => { const _0x34cf72 = _0xc6ce, _0x3d5a22 = await _0x59ce31[_0x34cf72(0x158)](_0x746d5f), _0x513e59 = _0x746d5f; console[_0x34cf72(0x1ac)]({ 'onwhatsapp': _0x3d5a22 }); if (_0x3d5a22[0x0]?.[_0x34cf72(0x163)]) { if (_0x5cf72) { const _0x248af7 = mime[_0x34cf72(0x1af)](__dirname + _0x34cf72(0x1a9) + _0x5cf72), _0x522deb = _0x248af7['slice'](0x0, _0x248af7[_0x34cf72(0x189)]('/')); if (_0x522deb == _0x34cf72(0x176)) { console['log'](_0x34cf72(0x181)); var _0x3b7f0e = { 'image': { 'url': __dirname + '/../../client/public/user-media/' + _0x5cf72 }, 'caption': _0x31881b ? _0x31881b : null }; } else { if (_0x522deb == _0x34cf72(0x1ab)) var _0x3b7f0e = { 'video': { 'url': __dirname + '/../../client/public/user-media/' + _0x5cf72 }, 'caption': _0x31881b ? _0x31881b : null }; else { if (_0x522deb == 'audio') var _0x3b7f0e = { 'audio': { 'url': __dirname + '/../../client/public/user-media/' + _0x5cf72 }, 'caption': _0x31881b ? _0x31881b : null }; else var _0x3b7f0e = { 'document': { 'url': __dirname + _0x34cf72(0x1a9) + _0x5cf72 }, 'mimetype': _0x248af7 }; } } const _0x3ce3a6 = await _0x59ce31[_0x34cf72(0x186)](_0x3d5a22[0x0]?.['jid'], _0x3b7f0e); console[_0x34cf72(0x1ac)]({ 'status': _0x34cf72(0x1a5), 'number': _0x746d5f, 'message': _0x31881b }); } else await _0x59ce31[_0x34cf72(0x186)](_0x3d5a22[0x0]?.[_0x34cf72(0x17c)], { 'text': _0x31881b }), console[_0x34cf72(0x1ac)]({ 'status': _0x34cf72(0x1a7), 'number': _0x746d5f, 'message': _0x31881b }); const _0x224532 = await awaitmysql[_0x34cf72(0x1a8)](_0x34cf72(0x1a1) + _0x434676[_0x34cf72(0x153)][_0x34cf72(0x169)] + '\x27\x20'); if (_0x224532['length'] > 0x0 || _0x224532[0x0]['left_msg']) { var _0xc6d8b3 = parseInt(_0x224532[0x0][_0x34cf72(0x183)]) - 0x1; await awaitmysql[_0x34cf72(0x1a8)](_0x34cf72(0x155) + _0xc6d8b3 + '\x27)\x20'); } const _0x3be06d = await awaitmysql[_0x34cf72(0x1a8)](_0x34cf72(0x1a2) + _0x27b01c + '\x27\x20'); var _0x3b7f0e = []; _0x3be06d[0x0]?.[_0x34cf72(0x1a5)] ? (_0x3b7f0e = JSON[_0x34cf72(0x19a)](_0x3be06d[0x0]?.[_0x34cf72(0x1a5)]), _0x3b7f0e = _0x3b7f0e[_0x34cf72(0x18f)](_0x746d5f), _0x3b7f0e = JSON[_0x34cf72(0x192)](_0x3b7f0e)) : _0x3b7f0e = JSON[_0x34cf72(0x192)]([_0x746d5f]); await awaitmysql[_0x34cf72(0x1a8)]('UPDATE\x20campaign\x20SET\x20sent\x20=\x20\x27' + _0x3b7f0e + _0x34cf72(0x19b) + _0x27b01c + '\x27\x20'), _0x14228e({ 'sent_number': _0x746d5f }); return; } else console[_0x34cf72(0x1ac)](_0x746d5f, _0x34cf72(0x15c)), _0x14228e({ 'sent_number': ![] }); }); } } exports[_0x5b7f5d(0x1b0)] = run;