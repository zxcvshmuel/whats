const _0x54f20e = _0x2727; (function (_0x5daf6a, _0x20c3c5) { const _0x10dfb8 = _0x2727, _0x3a94e5 = _0x5daf6a(); while (!![]) { try { const _0xdc1d0e = parseInt(_0x10dfb8(0x98)) / 0x1 * (-parseInt(_0x10dfb8(0x9a)) / 0x2) + parseInt(_0x10dfb8(0x93)) / 0x3 * (-parseInt(_0x10dfb8(0xdd)) / 0x4) + -parseInt(_0x10dfb8(0xa5)) / 0x5 * (parseInt(_0x10dfb8(0xbb)) / 0x6) + parseInt(_0x10dfb8(0xab)) / 0x7 + parseInt(_0x10dfb8(0x95)) / 0x8 * (-parseInt(_0x10dfb8(0x9d)) / 0x9) + parseInt(_0x10dfb8(0xd6)) / 0xa + parseInt(_0x10dfb8(0xc0)) / 0xb; if (_0xdc1d0e === _0x20c3c5) break; else _0x3a94e5['push'](_0x3a94e5['shift']()); } catch (_0x5adb3e) { _0x3a94e5['push'](_0x3a94e5['shift']()); } } }(_0x30a3, 0x791c3)); const { default: makeWASocket, DisconnectReason, useSingleFileAuthState } = require('@adiwajshing/baileys'), awaitmysql = require(_0x54f20e(0xbc)), pino = require(_0x54f20e(0xc7)); function _0x2727(_0x26007c, _0x349157) { const _0x30a37b = _0x30a3(); return _0x2727 = function (_0x2727a6, _0x596e8a) { _0x2727a6 = _0x2727a6 - 0x92; let _0x1c56ae = _0x30a37b[_0x2727a6]; return _0x1c56ae; }, _0x2727(_0x26007c, _0x349157); } var mime = require(_0x54f20e(0x97)); const fs = require('fs'); async function run(_0x33e1b6, _0x21c9a3) { const _0x5e2898 = _0x54f20e, _0x5b8ba0 = _0x33e1b6[_0x5e2898(0xbe)]?.[_0x5e2898(0x99)]?.['client_id'], _0x17124c = _0x33e1b6[_0x5e2898(0xbe)][_0x5e2898(0xb3)][0x0], _0x2ea1ab = _0x33e1b6[_0x5e2898(0xbe)][_0x5e2898(0xb3)][0x1], _0x5839d7 = _0x33e1b6[_0x5e2898(0xbe)]?.['button_templet']?.[_0x5e2898(0x96)] === _0x5e2898(0xac) ? ![] : _0x33e1b6[_0x5e2898(0xbe)]?.[_0x5e2898(0xd2)]?.[_0x5e2898(0x96)], _0x344f4b = _0x33e1b6['body']?.['button_templet']?.['id'], _0x69ec68 = _0x33e1b6[_0x5e2898(0xbe)]?.[_0x5e2898(0xa7)], _0x56d518 = _0x33e1b6[_0x5e2898(0xbe)]?.[_0x5e2898(0xd2)], _0x21d65d = _0x33e1b6[_0x5e2898(0xbe)]?.[_0x5e2898(0xc9)]; if (!_0x17124c || !_0x2ea1ab || !_0x5b8ba0 || !_0x344f4b || !_0x69ec68 || !_0x21d65d) return _0x21c9a3[_0x5e2898(0xd4)]({ 'msg': _0x5e2898(0xb1) }); if (_0x69ec68?.[_0x5e2898(0xaa)] > _0x33e1b6[_0x5e2898(0x94)]) return _0x21c9a3['json']({ 'msg': 'You\x20have\x20only\x20' + _0x33e1b6[_0x5e2898(0x94)] + '\x20left\x20messages\x20and\x20you\x20are\x20trying\x20to\x20send\x20more\x20than\x20it.' }); console[_0x5e2898(0xb7)]({ 'media': _0x5839d7 }); const _0x30b065 = __dirname + _0x5e2898(0xa0); console['log'](_0x5e2898(0xd9)); const _0x4c9479 = _0x30b065 + _0x5b8ba0 + _0x5e2898(0xcb); console[_0x5e2898(0xb7)](_0x4c9479); if (_0x4c9479 === undefined || !_0x4c9479) return _0x21c9a3[_0x5e2898(0xd4)]({ 'msg': 'No\x20session\x20found\x20please\x20relogin\x20the\x20instance.' }); _0x21c9a3[_0x5e2898(0xd4)]({ 'msg': _0x5e2898(0xa2), 'success': !![] }), await awaitmysql[_0x5e2898(0xc5)](_0x5e2898(0xd1) + _0x21d65d + _0x5e2898(0x9e) + _0x33e1b6[_0x5e2898(0xa1)][_0x5e2898(0xb9)] + _0x5e2898(0x9e) + _0x344f4b + _0x5e2898(0xd5)); const { state: _0x137e78, saveState: _0x1607bf } = useSingleFileAuthState(_0x30b065[_0x5e2898(0xc3)](_0x5b8ba0 + _0x5e2898(0xcb))), _0x31644b = makeWASocket({ 'auth': _0x137e78, 'defaultQueryTimeoutMs': undefined, 'logger': pino({ 'level': _0x5e2898(0x92) }), 'browser': [_0x5e2898(0xce), 'EDGE', _0x5e2898(0xc2)] }); let _0x188dbe = 0x0, _0x356428 = []; function _0x1e118c(_0x586b2a) { return new Promise((_0x1bdeb0, _0x3df274) => { setTimeout(() => { _0x1bdeb0(); }, [_0x586b2a]); }); } function _0x5d465d(_0x1208aa, _0x7f69c2) { return Math['floor'](Math['random']() * (_0x7f69c2 - _0x1208aa + 0x1) + _0x1208aa); } _0x31644b['ev']['on'](_0x5e2898(0x9b), async _0xd97ef5 => { const _0x5e6ec9 = _0x5e2898, { connection: _0x599aef, lastDisconnect: _0x1fce57, qr: _0x3de415, isNewLogin: _0x326a7f } = _0xd97ef5; if (_0x599aef === 'close') { let _0x51c41b = _0x1fce57[_0x5e6ec9(0xc8)]?.[_0x5e6ec9(0xcd)]?.[_0x5e6ec9(0xa3)]; console[_0x5e6ec9(0xb7)]({ 'statusCode': _0x51c41b }); if (_0x51c41b === DisconnectReason[_0x5e6ec9(0xbd)] || _0x51c41b === DisconnectReason[_0x5e6ec9(0xc1)] || _0x51c41b === DisconnectReason['loggedOut'] || _0x51c41b === DisconnectReason['badSession']) { await awaitmysql[_0x5e6ec9(0xc5)](_0x5e6ec9(0x9c) + _0x21d65d + '\x27\x20'), await awaitmysql['query'](_0x5e6ec9(0xbf) + _0x5b8ba0 + '\x27\x20'); var _0x5abf37 = __dirname + _0x5e6ec9(0xa0) + _0x5b8ba0 + _0x5e6ec9(0xcb); _0x5abf37 && fs['unlinkSync'](_0x5abf37); _0x31644b[_0x5e6ec9(0xba)](); return; } } async function _0x4ac844() { const _0x1a0a14 = _0x5e6ec9, _0x2d6905 = await _0x11482b(_0x69ec68[_0x1a0a14(0xd0)](',')[_0x188dbe], _0x56d518, _0x5839d7, _0x31644b); _0x2d6905['sent_number'] && _0x356428[_0x1a0a14(0xad)](_0x2d6905[_0x1a0a14(0xa6)]); _0x188dbe += 0x1; const _0x4acd8a = parseInt(_0x5d465d(_0x17124c, _0x2ea1ab)) * 0x3e8; await _0x1e118c(_0x4acd8a), console[_0x1a0a14(0xb7)]({ 'i': _0x188dbe, 'length': _0x69ec68[_0x1a0a14(0xd0)](',')['length'] }); if (_0x188dbe < _0x69ec68[_0x1a0a14(0xd0)](',')['length']) { _0x4ac844(); return; } console[_0x1a0a14(0xb7)](_0x1a0a14(0xa8)), await awaitmysql[_0x1a0a14(0xc5)](_0x1a0a14(0xdc) + _0x21d65d + '\x27\x20'); } _0x599aef === _0x5e6ec9(0xd8) && _0x4ac844(); }), _0x31644b['ev']['on'](_0x5e2898(0xd3), _0x1607bf), console[_0x5e2898(0xb7)](_0x5e2898(0xa9)); function _0x11482b(_0xcbee9, _0x4e1eb3, _0x3af4c2, _0x3df808) { return new Promise(async (_0x3e2077, _0xa9108b) => { const _0x284769 = _0x2727, _0x305d52 = await _0x3df808['onWhatsApp'](_0xcbee9), _0x31b227 = _0xcbee9; console[_0x284769(0xb7)]({ 'onwhatsapp': _0x305d52 }); var _0x19a861 = JSON[_0x284769(0x9f)](_0x4e1eb3?.[_0x284769(0xcc)]); if (_0x305d52[0x0]?.[_0x284769(0xb2)]) { if (_0x3af4c2) { console[_0x284769(0xb7)]('media\x20one'); const _0x1243c5 = __dirname + _0x284769(0xa4) + _0x3af4c2, _0x2f2f68 = { 'image': { 'url': _0x1243c5 }, 'caption': _0x4e1eb3['caption'], 'footer': _0x4e1eb3[_0x284769(0xc6)], 'buttons': _0x19a861, 'headerType': 0x4 }, _0x4df607 = await _0x3df808[_0x284769(0xae)](_0x305d52[0x0]?.['jid'], _0x2f2f68); console['log']({ 'status': _0x284769(0xda), 'number': _0xcbee9 }); } else { const _0x107e25 = { 'text': _0x4e1eb3[_0x284769(0xcf)] || '', 'footer': _0x4e1eb3[_0x284769(0xcf)] || '', 'buttons': _0x19a861, 'headerType': 0x1 }; await _0x3df808[_0x284769(0xae)](_0x305d52[0x0]?.[_0x284769(0xb5)], _0x107e25), console[_0x284769(0xb7)]({ 'status': _0x284769(0xb0), 'number': _0xcbee9 }); } const _0x3d335a = await awaitmysql[_0x284769(0xc5)]('SELECT\x20*\x20FROM\x20user\x20WHERE\x20uid\x20=\x20\x27' + _0x33e1b6[_0x284769(0xa1)][_0x284769(0xb9)] + '\x27\x20'); if (_0x3d335a[_0x284769(0xaa)] > 0x0 || _0x3d335a[0x0]['left_msg']) { var _0x3b4916 = parseInt(_0x3d335a[0x0][_0x284769(0xb4)]) - 0x1; await awaitmysql[_0x284769(0xc5)](_0x284769(0xca) + _0x3b4916 + _0x284769(0xc4)); } const _0x9b929c = await awaitmysql[_0x284769(0xc5)](_0x284769(0xdb) + _0x21d65d + '\x27\x20'); var _0x5db2ce = []; _0x9b929c[0x0]?.[_0x284769(0xda)] ? (_0x5db2ce = JSON[_0x284769(0x9f)](_0x9b929c[0x0]?.['sent']), _0x5db2ce = _0x5db2ce['concat'](_0xcbee9), _0x5db2ce = JSON['stringify'](_0x5db2ce)) : _0x5db2ce = JSON[_0x284769(0xd7)]([_0xcbee9]); await awaitmysql[_0x284769(0xc5)](_0x284769(0xb8) + _0x5db2ce + _0x284769(0xb6) + _0x21d65d + '\x27\x20'), _0x3e2077({ 'sent_number': _0xcbee9 }); return; } else console[_0x284769(0xb7)](_0xcbee9, '\x20Mobile\x20number\x20is\x20not\x20registered'), _0x3e2077({ 'sent_number': ![] }); }); } } exports[_0x54f20e(0xaf)] = run; function _0x30a3() { const _0x30d536 = ['UPDATE\x20user\x20SET\x20left_msg\x20=\x20(\x27', '.json', 'buttons', 'output', 'FFA', 'text', 'split', 'INSERT\x20INTO\x20campaign\x20(unique_id,\x20uid,\x20templet_id,\x20status,\x20type)\x20VALUES\x20\x20(\x27', 'button_templet', 'creds.update', 'json', '\x27,\x20\x27started\x27,\x20\x27button\x27)\x20', '6534170ZAHuTC', 'stringify', 'open', 'started', 'sent', 'SELECT\x20*\x20FROM\x20campaign\x20WHERE\x20unique_id\x20=\x20\x27', 'UPDATE\x20campaign\x20SET\x20status\x20=\x20\x27completed\x27\x20WHERE\x20unique_id\x20=\x20\x27', '455740Ytfdir', 'fatal', '3TCWGsi', 'plan', '3044072xYCTXf', 'image', 'mime-types', '1nRruLN', 'instance', '110974hTCUsS', 'connection.update', 'UPDATE\x20campaign\x20SET\x20status\x20=\x20\x27failed\x20due\x20to\x20logout\x27\x20WHERE\x20unique_id\x20=\x20\x27', '18zobRVc', '\x27,\x27', 'parse', '/../../sessions/', 'decode', 'Request\x20has\x20been\x20sent\x20check\x20status\x20in\x20campaign\x20history.', 'statusCode', '/../../client/public/user-media/', '365xqIIba', 'sent_number', 'number_data', 'task\x20done', 'cre\x20updated', 'length', '4849544lnGuOX', 'null', 'push', 'sendMessage', 'run', 'sent\x20but\x20no\x20media', 'Send\x20all\x20required\x20fields\x20', 'exists', 'delay', 'left_msg', 'jid', '\x27\x20WHERE\x20unique_id\x20=\x20\x27', 'log', 'UPDATE\x20campaign\x20SET\x20sent\x20=\x20\x27', 'uid', 'end', '16590uhqCGN', '../../function/awaitmysql', 'connectionClosed', 'body', 'DELETE\x20FROM\x20instance\x20WHERE\x20client_id\x20=\x20\x27', '3103573XfAtSO', 'connectionLost', '1.0', 'concat', '\x27)\x20', 'query', 'footer', 'pino', 'error', 'unique_id']; _0x30a3 = function () { return _0x30d536; }; return _0x30a3(); }